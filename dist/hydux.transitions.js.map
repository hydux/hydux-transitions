{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///hydux.transitions.js","webpack:///webpack/bootstrap 681766efd7ac8a0421fa","webpack:///./src/index.ts","webpack:///./node_modules/hydux/src/index.ts","webpack:///./node_modules/hydux/src/cmd.ts","webpack:///./node_modules/hydux/src/utils.ts"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","parseTransform","t","transform","keys","length","key","test","val","isNum","isArray","map","Units","px","Array","join","parseTransition","duration","delay","easing","removeTransition","style","nextStyle","__assign","frameToStyle","frame","_a","transition","transitionProperty","needPrefix","transformOrigin","transformStyle","isFn","fn","runFrames","frames","state","actions","onEnd","_end","requestAnimationFrame","_startFrame","endTimer","setTimeout","_endFrame","timers","push","assign","arguments","value","hydux_1","deg","grad","rad","turn","percent","TypeError","rem","pt","em","ms","cubicBezier","ax","ay","bx","by","start","offset","matrix","a","b","tx","ty","matrix3d","e","f","x","y","z","v","document","body","webkitTransform","className","onStart","Cmd","ofFn","none","animState","AnimState","end","init","apply","_initArgs","ofSub","run","reset","forEach","timer","clearTimeout","lastFrame","options","ready","initFrame","default","normalizeActionResult","result","utils_1","isFunction","undefined","then","cmd_1","app","props","appRender","appState","view","appActions","render","err","console","error","onError","from","path","action","msgData","nextState","nextAppState","cmd","onUpdate","setDeep","merge","prevAppState","concat","sub","appSubscribe","subscribe","_","onRender","log","noop","getState","ofPromise","task","args","succeedAction","failedAction","catch","batch","cmds","_i","_concat","set","to","constructor","slice","data"],"mappings":"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","file":"hydux.transitions.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"transitions\"] = factory();\n\telse\n\t\troot[\"hydux\"] = root[\"hydux\"] || {}, root[\"hydux\"][\"transitions\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"transitions\"] = factory();\n\telse\n\t\troot[\"hydux\"] = root[\"hydux\"] || {}, root[\"hydux\"][\"transitions\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar hydux_1 = __webpack_require__(1);\r\nexports.Units = {\r\n    deg: function (n) { return n + 'deg'; },\r\n    grad: function (n) { return n + 'grad'; },\r\n    rad: function (n) { return n + 'rag'; },\r\n    turn: function (n) { return n + 'turn'; },\r\n    px: function (n) { return n + 'px'; },\r\n    percent: function (n) {\r\n        if (n < -100 || n > 100)\r\n            throw TypeError('n should >= -100 and <= 100, but get:' + n);\r\n        return n + '%';\r\n    },\r\n    rem: function (n) { return n + 'rem'; },\r\n    pt: function (n) { return n + 'pt'; },\r\n    em: function (n) { return n + 'em'; },\r\n    ms: function (n) { return n; },\r\n    cubicBezier: function (ax, ay, bx, by) { return \"cubic-bezier(\" + ax + \", \" + ay + \", \" + bx + \", \" + by + \")\"; },\r\n    start: function (n) { return ({ start: n }); },\r\n    offset: function (n) { return ({ offset: n }); },\r\n    matrix: function (a, b, c, d, tx, ty) { return \"matrix(\" + a + \", \" + b + \", \" + c + \", \" + d + \", \" + tx + \", \" + ty + \")\"; },\r\n    matrix3d: function (a, b, c, d, e, f, x, y, z) { return \"matrix(\" + a + \", \" + b + \", \" + c + \", \" + d + \", \" + e + \", \" + f + \" \" + x + \", \" + y + \", \" + z + \")\"; },\r\n};\r\nvar isSet = function (v) { return typeof v !== 'undefined'; };\r\nvar isNum = function (v) { return typeof v === 'number'; };\r\nvar isArray = function (v) { return v instanceof Array; };\r\nfunction parseTransform(t) {\r\n    if (t.transform) {\r\n        return t.transform;\r\n    }\r\n    var keys = Object.keys(t);\r\n    var i = keys.length;\r\n    var transform = '';\r\n    while (i--) {\r\n        var key = keys[i];\r\n        if (!/^translate|scale|rotate|skew|perspective|matrix/.test(key)) {\r\n            continue;\r\n        }\r\n        var val = t[key];\r\n        if (!/^scale/.test(key)) {\r\n            if (isNum(val)) {\r\n                val = val + 'px';\r\n            }\r\n            else if (isArray(val) && isNum(val[0])) {\r\n                val = val.map(exports.Units.px);\r\n            }\r\n        }\r\n        val = val instanceof Array ? val.join(', ') : val;\r\n        transform += key + \"(\" + val + \") \";\r\n    }\r\n    return transform;\r\n}\r\nfunction parseTransition(t) {\r\n    var duration = (t.duration || 0) / 1000;\r\n    var delay = (t.delay || 0) / 1000;\r\n    return [duration + \"s \" + (t.easing || 'ease-in-out') + \" \" + delay + \"s\", t.property || 'transform,opacity'];\r\n}\r\nfunction removeTransition(style) {\r\n    var nextStyle = __assign({}, style);\r\n    delete nextStyle['WebkitTransition'];\r\n    delete nextStyle['transition'];\r\n    return nextStyle;\r\n}\r\nvar needPrefix = isSet(document.body.style.webkitTransform);\r\nfunction frameToStyle(frame) {\r\n    var style = frame.style || {};\r\n    var _a = parseTransition(frame), transition = _a[0], transitionProperty = _a[1];\r\n    var transform = parseTransform(frame);\r\n    if (needPrefix) {\r\n        style['WebkitTransition'] = transition;\r\n        style['WebkitTransitionProperty'] = transitionProperty;\r\n        style['WebkitTransform'] = transform;\r\n        style['WebkitTransformOrigin'] = frame.transformOrigin;\r\n        style['WebkitTransformStyle'] = frame.transformStyle;\r\n    }\r\n    else {\r\n        style['transitionProperty'] = transitionProperty;\r\n        style['transition'] = transition;\r\n        style['transform'] = transform;\r\n        style['transform-origin'] = frame.transformOrigin;\r\n        style['transform-style'] = frame.transformStyle;\r\n    }\r\n    return style;\r\n}\r\nfunction isFn(fn) {\r\n    return typeof fn === 'function';\r\n}\r\nfunction runFrames(frames, state, actions, onEnd, i) {\r\n    if (i === void 0) { i = 0; }\r\n    if (i >= frames.length) {\r\n        actions._end();\r\n        return isFn(onEnd) && onEnd(frames);\r\n    }\r\n    var frame = frames[i];\r\n    requestAnimationFrame(function () {\r\n        requestAnimationFrame(function () {\r\n            actions._startFrame(frame);\r\n            var endTimer = setTimeout(function () {\r\n                actions._endFrame(frame);\r\n                runFrames(frames, state, actions, onEnd, ++i);\r\n            }, frame.duration || 1);\r\n            // is it worth to use anti-pattern to reduce vdom render ?\r\n            state.timers.push(endTimer);\r\n        });\r\n    });\r\n    // state.timers.push(startTimer as any)\r\n}\r\nexports.actions = {\r\n    _startFrame: function (frame) { return function (state) { return function (actions) {\r\n        var nextState = __assign({}, state, { style: frameToStyle(frame), className: frame.className || '' });\r\n        return [\r\n            nextState,\r\n            frame.onStart\r\n                ? hydux_1.Cmd.ofFn(frame.onStart, frame)\r\n                : hydux_1.Cmd.none\r\n        ];\r\n    }; }; },\r\n    _endFrame: function (frame) { return function (state) { return function (actions) {\r\n        return [\r\n            state,\r\n            frame.onEnd\r\n                ? hydux_1.Cmd.ofFn(frame.onEnd, frame)\r\n                : []\r\n        ];\r\n    }; }; },\r\n    _end: function () { return function (state) { return (__assign({}, state, { animState: AnimState.end })); }; },\r\n    start: function (onEnd) { return function (state) { return function (actions) {\r\n        // if (state.animState !== AnimState.ready) {\r\n        //   return [state, Cmd.ofSub<Actions>(actions => {\r\n        //     actions.reset()\r\n        //     actions.start(onEnd)\r\n        //   })]\r\n        // }\r\n        return [\r\n            exports.init.apply(null, state._initArgs),\r\n            hydux_1.Cmd.ofSub(function (actions) {\r\n                runFrames(state.frames, state, actions, onEnd);\r\n            }),\r\n        ];\r\n    }; }; },\r\n    run: function (frames) { return function (state) { return function (actions) {\r\n        var nextState = __assign({}, state, { frames: frames });\r\n        return [state, hydux_1.Cmd.ofSub(function (actions) {\r\n                actions.start();\r\n            })];\r\n    }; }; },\r\n    reset: function () { return function (state) {\r\n        return [\r\n            exports.init.apply(null, state._initArgs),\r\n            hydux_1.Cmd.ofFn(function () { return state.timers.forEach(function (timer) { return clearTimeout(timer); }); }, void 0),\r\n        ];\r\n    }; },\r\n    end: function () { return function (state) { return function (actions) {\r\n        if (state.frames.length === 0)\r\n            return;\r\n        var lastFrame = state.frames[state.frames.length - 1];\r\n        return [\r\n            __assign({}, state, { animState: AnimState.end, style: removeTransition(frameToStyle(lastFrame)), timers: [], className: lastFrame.className || '' }),\r\n            hydux_1.Cmd.ofFn(function () { return state.timers.forEach(function (timer) { return (clearTimeout(timer)); }); }, void 0),\r\n        ];\r\n    }; }; }\r\n};\r\nfunction isPeople(obj) {\r\n    var obj2 = obj;\r\n    if (typeof obj2.name === 'function' && typeof obj2.age === 'number') {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nvar AnimState;\r\n(function (AnimState) {\r\n    AnimState[AnimState[\"running\"] = 1] = \"running\";\r\n    AnimState[AnimState[\"end\"] = 2] = \"end\";\r\n    AnimState[AnimState[\"ready\"] = 3] = \"ready\";\r\n})(AnimState = exports.AnimState || (exports.AnimState = {}));\r\nexports.init = function (frames, options) {\r\n    if (frames === void 0) { frames = []; }\r\n    if (options === void 0) { options = {}; }\r\n    return ({\r\n        animState: AnimState.ready,\r\n        style: options.initFrame ? frameToStyle(options.initFrame) : {},\r\n        className: '',\r\n        timers: [],\r\n        frames: frames,\r\n        _initArgs: [frames, options]\r\n    });\r\n};\r\nexports.default = {\r\n    init: exports.init,\r\n    actions: exports.actions,\r\n    Units: exports.Units,\r\n};\r\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar cmd_1 = __webpack_require__(2);\nexports.Cmd = cmd_1.default;\nvar utils_1 = __webpack_require__(3);\nexports.noop = utils_1.noop;\nfunction normalizeActionResult(result, state, actions) {\n    utils_1.isFunction(result) && (result = result(state));\n    utils_1.isFunction(result) && (result = result(actions));\n    // action can be a function that return a promise or undefined(callback)\n    if (result === undefined ||\n        (result.then && typeof result.then === 'function')) {\n        return [state, cmd_1.default.none];\n    }\n    if (result instanceof Array) {\n        return result;\n    }\n    return [result, cmd_1.default.none];\n}\nfunction app(props) {\n    // const appEvents = props.events || {}\n    var appActions = {};\n    var appSubscribe = props.subscribe || (function (_) { return cmd_1.default.none; });\n    var render = props.onRender || console.log;\n    var onError = props.onError || utils_1.noop;\n    // const appMiddlewares = props.middlewares || []\n    var _a = normalizeActionResult(props.init(), void 0, appActions), appState = _a[0], cmd = _a[1];\n    init(appState, appActions, props.actions, []);\n    cmd.forEach(function (sub) { return sub(appActions); });\n    appRender(appState);\n    appSubscribe(appState).forEach(function (sub) { return sub(appActions); });\n    return __assign({}, props, { actions: appActions, getState: function () { return appState; }, render: appRender });\n    function appRender(state) {\n        if (state === void 0) { state = appState; }\n        if (state !== appState) {\n            appState = state;\n        }\n        var view;\n        if (utils_1.isFunction(view = props.view(appState))) {\n            view = view(appActions);\n        }\n        try {\n            return render(view);\n        }\n        catch (err) {\n            console.error(err);\n            onError(err);\n        }\n    }\n    function init(state, actions, from, path) {\n        for (var key in from) {\n            utils_1.isFunction(from[key])\n                ? (function (key, action) {\n                    actions[key] = function (msgData) {\n                        state = utils_1.get(path, appState);\n                        // action = appMiddlewares.reduce((action, fn) => fn(action, key, path), action)\n                        var nextState = state;\n                        var nextAppState = appState;\n                        var cmd = cmd_1.default.none;\n                        try {\n                            _a = normalizeActionResult(action(msgData), state, actions), nextState = _a[0], cmd = _a[1];\n                        }\n                        catch (error) {\n                            console.error(error);\n                            onError(error);\n                        }\n                        if (props.onUpdate) {\n                            nextAppState = utils_1.setDeep(path, utils_1.merge(state, nextState), appState);\n                            props.onUpdate({\n                                prevAppState: appState,\n                                nextAppState: nextAppState,\n                                msgData: msgData,\n                                action: path.concat(key).join('.')\n                            });\n                        }\n                        if (nextState !== state) {\n                            appState = nextAppState !== appState\n                                ? nextAppState\n                                : utils_1.setDeep(path, utils_1.merge(state, nextState), appState);\n                            appRender(appState);\n                        }\n                        cmd.forEach(function (sub) { return sub(actions); });\n                        var _a;\n                    };\n                })(key, from[key])\n                : init(state[key] || (state[key] = {}), (actions[key] = {}), from[key], path.concat(key));\n        }\n    }\n}\nexports.default = app;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {\n    none: [],\n    ofPromise: function (task, args, succeedAction, failedAction) {\n        return [\n            function (_) {\n                task(args)\n                    .then(succeedAction)\n                    .catch(failedAction);\n            }\n        ];\n    },\n    ofFn: function (task, args, succeedAction, failedAction) {\n        return [\n            function (_) {\n                try {\n                    var result = task(args);\n                    if (result && succeedAction) {\n                        succeedAction(result);\n                    }\n                }\n                catch (e) {\n                    failedAction && failedAction(e);\n                }\n            }\n        ];\n    },\n    ofSub: function (sub) {\n        return [sub];\n    },\n    batch: function () {\n        var cmds = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            cmds[_i] = arguments[_i];\n        }\n        var _concat = Array.prototype.concat;\n        return _concat.apply([], _concat.apply([], cmds));\n    },\n    map: function (map, cmd) {\n        return cmd.map(function (sub) { return function (actions) { return sub(map(actions)); }; });\n    }\n};\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction set(to, from) {\n    for (var i in from) {\n        to[i] = from[i];\n    }\n    return to;\n}\nexports.set = set;\nfunction merge(to, from) {\n    return set(set(to ? new to.constructor() : {}, to), from);\n}\nexports.merge = merge;\nfunction setDeep(path, value, from) {\n    var to = from ? new from.constructor() : {};\n    return 0 === path.length\n        ? value\n        : ((to[path[0]] =\n            1 < path.length\n                ? setDeep(path.slice(1), value, from[path[0]])\n                : value),\n            merge(from, to));\n}\nexports.setDeep = setDeep;\nfunction get(path, from) {\n    for (var i = 0; i < path.length; i++) {\n        from = from[path[i]];\n    }\n    return from;\n}\nexports.get = get;\nfunction isFunction(data) {\n    return 'function' === typeof data;\n}\nexports.isFunction = isFunction;\nexports.noop = function (f) { return f; };\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// hydux.transitions.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 681766efd7ac8a0421fa","import { Cmd, Sub } from 'hydux'\nexport { Sub }\nexport type ValueOf2d<T> = T | [T, T]\nexport type ValueOf3d<T> = ValueOf2d<T> | [T, T, T]\n\nexport type CssAngle = string & { _tag: 'Angle' }\nexport type CssPx = string & { _tag: 'CssPx' }\nexport type CssRem = string & { _tag: 'CssRem' }\nexport type CssEm = string & { _tag: 'CssEm' }\nexport type CssPt = string & { _tag: 'CssPt' }\nexport type CssMs = number & { _tag: 'DurtionMs' }\nexport type CssLenWithUnit = CssPx | CssRem | CssEm | CssPt\nexport type CssPercent = string & { _tag: 'CssPercent' }\nexport type CssLength = number | CssLenWithUnit | CssPercent\nexport type CssCubicBezier = string & { _tag: 'CssCubicBezier' }\nexport type StartTime = ({start: number} | {offset: number}) & { _tag: 'HyduxTransitionOffset' }\nexport type CssMatrix = string & { _tag: 'CssMatrix' }\nexport type CssMatrix3d = string & { _tag: 'CssMatrix3d' }\n\nexport const Units = {\n  deg: (n: number) => n + 'deg' as CssAngle,\n  grad: (n: number) => n + 'grad' as CssAngle,\n  rad: (n: number) => n + 'rag' as CssAngle,\n  turn: (n: number) => n + 'turn' as CssAngle,\n  px: (n: number) => n + 'px' as CssPx,\n  percent: (n: number) => {\n    if (n < -100 || n > 100) throw TypeError('n should >= -100 and <= 100, but get:' + n)\n    return n + '%' as CssPercent\n  },\n  rem: (n: number) => n + 'rem' as CssRem,\n  pt: (n: number) => n + 'pt' as CssPt,\n  em: (n: number) => n + 'em' as CssEm,\n  ms: (n: number) => n as CssMs,\n  cubicBezier: (ax: number, ay: number, bx: number, by: number) => `cubic-bezier(${ax}, ${ay}, ${bx}, ${by})` as CssCubicBezier,\n  start: (n: number) => ({ start: n }) as StartTime,\n  offset: (n: number) => ({ offset: n }) as StartTime,\n  matrix: (a: number, b: number, c: number, d: number, tx: number, ty: number) => `matrix(${a}, ${b}, ${c}, ${d}, ${tx}, ${ty})` as CssMatrix,\n  matrix3d: (a: number, b: number, c: number, d: number, e: number, f: number, x: number, y: number, z: number) => `matrix(${a}, ${b}, ${c}, ${d}, ${e}, ${f} ${x}, ${y}, ${z})` as CssMatrix3d,\n}\n\nexport interface Transform {\n  transform?: string\n  translateX?: CssLength\n  translateY?: CssLength\n  translateZ?: CssLength\n  translate?: ValueOf2d<CssLength>\n  translate3d?: ValueOf3d<CssLength>\n  scaleX?: number\n  scaleY?: number\n  scaleZ?: number\n  scale?: ValueOf2d<number>\n  scale3d?: ValueOf3d<number>\n  rotateX?: CssAngle\n  rotateY?: CssAngle\n  rotateZ?: CssAngle\n  rotate?: ValueOf2d<CssAngle>\n  rotate3d?: ValueOf3d<CssAngle>\n  skewX?: CssAngle\n  skewY?: CssAngle\n  skew?: ValueOf2d<CssAngle>\n  perspective?: CssLength,\n  matrix?: CssMatrix,\n  matrix3d?: CssMatrix3d,\n}\n\nexport interface Frame extends Transform {\n  transformOrigin?: string\n  transformStyle?: string\n  style?: object,\n  delay?: CssMs\n  duration?: CssMs\n  property?: 'all' | 'transition' | 'opacity'\n  easing?: 'ease' | 'ease-in' | 'ease-out' | 'ease-in-out' | 'step-start' | 'step-end' | CssCubicBezier\n  className?: string\n  attrs?: {[key: string]: string}\n  opacity?: number\n  onStart?: (frame: Frame) => any\n  onEnd?: (frame: Frame) => any\n}\nconst isSet = v => typeof v !== 'undefined'\nconst isNum = v => typeof v === 'number'\nconst isArray = v => v instanceof Array\n\nfunction parseTransform(t: Transform) {\n  if (t.transform) {\n    return t.transform\n  }\n  const keys = Object.keys(t)\n  let i = keys.length\n  let transform = ''\n  while (i--) {\n    const key = keys[i]\n    if (!/^translate|scale|rotate|skew|perspective|matrix/.test(key)) {\n      continue\n    }\n    let val = t[key]\n    if (!/^scale/.test(key)) {\n      if (isNum(val)) {\n        val = val + 'px'\n      } else if (isArray(val) && isNum(val[0])) {\n        val = val.map(Units.px)\n      }\n    }\n    val = val instanceof Array ? val.join(', ') : val\n    transform += `${key}(${val}) `\n  }\n  return transform\n}\n\nfunction parseTransition(t: Frame) {\n  const duration = (t.duration || 0) / 1000\n  const delay = (t.delay || 0) / 1000\n  return [`${duration}s ${t.easing || 'ease-in-out'} ${delay}s`, t.property || 'transform,opacity']\n}\n\nfunction removeTransition(style: object) {\n  const nextStyle = { ...style }\n  delete nextStyle['WebkitTransition']\n  delete nextStyle['transition']\n  return nextStyle\n}\n\nconst needPrefix = isSet(document.body.style.webkitTransform)\n\nfunction frameToStyle(frame: Frame) {\n  const style = frame.style || {}\n  const [transition, transitionProperty] = parseTransition(frame)\n  const transform = parseTransform(frame)\n  if (needPrefix) {\n    style['WebkitTransition'] = transition\n    style['WebkitTransitionProperty'] = transitionProperty\n    style['WebkitTransform'] = transform\n    style['WebkitTransformOrigin'] = frame.transformOrigin\n    style['WebkitTransformStyle'] = frame.transformStyle\n  } else {\n    style['transitionProperty'] = transitionProperty\n    style['transition'] = transition\n    style['transform'] = transform\n    style['transform-origin'] = frame.transformOrigin\n    style['transform-style'] = frame.transformStyle\n  }\n  return style\n}\nfunction isFn(fn: any): fn is Function {\n  return typeof fn === 'function'\n}\nfunction runFrames(frames: Frame[], state: State, actions: Actions, onEnd?: Function, i: number = 0) {\n  if (i >= frames.length) {\n    actions._end()\n    return isFn(onEnd) && onEnd(frames)\n  }\n  const frame = frames[i]\n  requestAnimationFrame(() => {\n    requestAnimationFrame(() => {\n      actions._startFrame(frame)\n      const endTimer = setTimeout(\n        () => {\n          actions._endFrame(frame)\n          runFrames(frames, state, actions, onEnd, ++i)\n        },\n        frame.duration || 1,\n      )\n      // is it worth to use anti-pattern to reduce vdom render ?\n      state.timers.push(endTimer as any)\n    })\n  })\n  // state.timers.push(startTimer as any)\n}\nexport const actions = {\n  _startFrame: (frame: Frame) => (state: State) => (actions: Actions) => {\n    const nextState: State = {\n      ...state,\n      style: frameToStyle(frame),\n      className: frame.className || '',\n    }\n    return [\n      nextState,\n      frame.onStart\n        ? Cmd.ofFn(frame.onStart, frame)\n        : Cmd.none\n    ]\n  },\n  _endFrame: (frame: Frame) => (state: State) => (actions: Actions) => {\n    return [\n      state as State,\n      frame.onEnd\n        ? Cmd.ofFn(frame.onEnd, frame)\n        : []\n    ]\n  },\n  _end: () => (state: State) => ({\n    ...state,\n    animState: AnimState.end,\n  }),\n  start: (onEnd?: Function) => (state: State) => (actions: Actions) => {\n    // if (state.animState !== AnimState.ready) {\n    //   return [state, Cmd.ofSub<Actions>(actions => {\n    //     actions.reset()\n    //     actions.start(onEnd)\n    //   })]\n    // }\n    return [\n      init.apply(null, state._initArgs),\n      Cmd.ofSub<Actions>(actions => {\n        runFrames(state.frames, state, actions, onEnd)\n      }),\n    ]\n  },\n  run: (frames: Frame[]) => (state: State) => (actions: Actions) => {\n    const nextState: State = {\n      ...state,\n      frames,\n    }\n    return [state, Cmd.ofSub<Actions>(actions => {\n      actions.start()\n    })]\n  },\n  reset: () => (state: State) => {\n    return [\n      init.apply(null, state._initArgs),\n      Cmd.ofFn(() => state.timers.forEach(timer => clearTimeout(timer as any)), void 0),\n    ]\n  },\n  end: () => (state: State) => (actions: Actions) => {\n    if (state.frames.length === 0) return\n    const lastFrame = state.frames[state.frames.length - 1]\n    return [\n      { ...state,\n        animState: AnimState.end,\n        style: removeTransition(frameToStyle(lastFrame)),\n        timers: [],\n        className: lastFrame.className || '', },\n      Cmd.ofFn(() => state.timers.forEach(timer => (clearTimeout(timer as any))), void 0),\n    ]\n  }\n}\nexport type People = {\n  name: string\n  age: number\n}\nfunction isPeople(obj: any): obj is People {\n  let obj2 = obj\n  if (typeof obj2.name === 'function' && typeof obj2.age === 'number') {\n    return true\n  }\n  return false\n}\n\nexport type Actions = typeof actions\nexport enum AnimState {\n  running = 1,\n  end = 2,\n  ready = 3,\n}\nexport type State = {\n  animState: AnimState\n  style: object\n  className: string\n  timers: (number | NodeJS.Timer)[]\n  frames: Frame[]\n  _initArgs: any[]\n}\nexport type InitOptions = {\n  initFrame?: Frame\n}\nexport const init = (frames: Frame[] = [] as any, options: InitOptions = {}) => ({\n  animState: AnimState.ready,\n  style: options.initFrame ? frameToStyle(options.initFrame) : {},\n  className: '',\n  timers: [],\n  frames,\n  _initArgs: [frames, options]\n} as State)\n\nexport default {\n  init,\n  actions,\n  Units,\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { ActionResult, ActionState, ActionCmdResult, ActionType, ActionsType } from './types'\nimport Cmd, { CmdType, Sub } from './cmd'\nimport { set, merge, setDeep, get, isFunction, noop } from './utils'\n\nexport { CmdType, Sub, ActionResult, ActionState, ActionCmdResult, ActionType, ActionsType }\n\nexport type Init<S, A> = () => S | [S, CmdType<A>]\nexport type View<S, A> = (appState: S) => ((actions: A) => any)\nexport type Subscribe<S, A> = (state: S) => CmdType<A>\nexport type OnUpdate<S, A> = <M>(data: { prevAppState: S, nextAppState: S, msgData: M, action: string }) => void\n\nexport { Cmd, noop }\n\nexport interface AppProps<State, Actions> {\n  init: Init<State, Actions>,\n  view: View<State, Actions>\n  actions: ActionsType<State, Actions>,\n  subscribe?: Subscribe<State, Actions>,\n  // middlewares: ((action: MyAction<any, State, Actions>, key: string, path: string[]) => MyAction<any, State, Actions>)[],\n  onRender?: (view: any) => void,\n  onError?: (err: Error) => void,\n  onUpdate?: OnUpdate<State, Actions>,\n}\n\nfunction normalizeActionResult<State, Actions>(result, state, actions): ActionCmdResult<State, Actions> {\n  isFunction(result) && (result = result(state))\n  isFunction(result) && (result = result(actions))\n  // action can be a function that return a promise or undefined(callback)\n  if (\n    result === undefined ||\n    (result.then && typeof result.then === 'function')\n  ) {\n    return [state, Cmd.none]\n  }\n\n  if (result instanceof Array) {\n    return result as any\n  }\n  return [result, Cmd.none]\n}\n\nexport type App<State, Actions> = (props: AppProps<State, Actions>) => any\n\nexport default function app<State, Actions>(props: AppProps<State, Actions>) {\n  // const appEvents = props.events || {}\n  const appActions = {} as Actions\n  const appSubscribe = props.subscribe || (_ => Cmd.none)\n  const render = props.onRender || console.log\n  const onError = props.onError || noop\n  // const appMiddlewares = props.middlewares || []\n  let [appState, cmd] = normalizeActionResult(props.init(), void 0, appActions) as [State, CmdType<Actions>]\n  init(appState, appActions, props.actions, [])\n  cmd.forEach(sub => sub(appActions))\n  appRender(appState)\n  appSubscribe(appState).forEach(sub => sub(appActions))\n\n  return {\n    ...props,\n    actions: appActions,\n    getState() { return appState },\n    render: appRender,\n  }\n\n  function appRender(state = appState) {\n    if (state !== appState) {\n      appState = state\n    }\n    let view\n    if (isFunction(view = props.view(appState))) {\n      view = view(appActions)\n    }\n    try {\n      return render(view)\n    } catch (err) {\n      console.error(err)\n      onError(err)\n    }\n  }\n\n  function init(state, actions, from: ActionsType<State, Actions> | ActionType<any, State, Actions>, path: string[]) {\n    for (const key in from) {\n      isFunction(from[key])\n        ? ((key, action: ActionType<any, State, Actions>) => {\n          actions[key] = function(msgData) {\n            state = get(path, appState)\n            // action = appMiddlewares.reduce((action, fn) => fn(action, key, path), action)\n            let nextState = state\n            let nextAppState = appState\n            let cmd = Cmd.none\n            try {\n              [nextState, cmd] = normalizeActionResult(action(msgData), state, actions)\n            } catch (error) {\n              console.error(error)\n              onError(error)\n            }\n\n            if (props.onUpdate) {\n              nextAppState = setDeep(path, merge(state, nextState), appState)\n              props.onUpdate({\n                prevAppState: appState,\n                nextAppState,\n                msgData,\n                action: path.concat(key).join('.')\n              })\n            }\n\n            if (nextState !== state) {\n              appState = nextAppState !== appState\n                ? nextAppState\n                : setDeep(path, merge(state, nextState), appState)\n              appRender(appState)\n            }\n            cmd.forEach(sub => sub(actions))\n          }\n        })(key, from[key])\n        : init(\n            state[key] || (state[key] = {}),\n            (actions[key] = {}),\n            from[key],\n            path.concat(key)\n          )\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/hydux/src/index.ts","import { ActionResult, ActionType, ActionsType } from './types'\n\nexport interface Sub<Actions> {\n  (actions: Actions): void\n}\nexport type CmdType<Actions> = Sub<Actions>[]\n\nexport default {\n  none: ([] as Array<Sub<any>>),\n  ofPromise<A, T, State, Actions>(\n    task: (args: A) => Promise<T>,\n    args: A,\n    succeedAction?: ActionType<T, State, Actions>,\n    failedAction?: ActionType<Error, State, Actions>\n  ): CmdType<Actions> {\n    return [\n      _ => {\n        task(args)\n        .then(succeedAction)\n        .catch(failedAction)\n      }\n    ]\n  },\n  ofFn<A, T, State, Actions>(\n    task: (args: A) => T | void,\n    args: A,\n    succeedAction?: ActionType<T, State, Actions>,\n    failedAction?: ActionType<Error, State, Actions>\n  ): CmdType<Actions> {\n    return [\n      _ => {\n        try {\n          let result = task(args)\n          if (result && succeedAction) {\n            succeedAction(result)\n          }\n        } catch (e) {\n          failedAction && failedAction(e)\n        }\n      }\n    ]\n  },\n  ofSub<Actions>(sub: Sub<Actions>): CmdType<Actions> {\n    return [sub]\n  },\n  batch<State, Actions>(...cmds: (CmdType<Actions> | CmdType<Actions>[])[]): CmdType<Actions> {\n    const _concat = Array.prototype.concat\n    return _concat.apply([], _concat.apply([], cmds))\n  },\n  map<State, Actions, SubActions>(map: (action: Actions) => SubActions, cmd: CmdType<SubActions>): CmdType<Actions> {\n    return cmd.map(sub => actions => sub(map(actions)))\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/hydux/src/cmd.ts","\nexport function set(to, from) {\n  for (const i in from) {\n    to[i] = from[i]\n  }\n  return to\n}\n\nexport function merge(to, from) {\n  return set(set(to ? new to.constructor() : {}, to), from)\n}\n\nexport function setDeep(path, value, from) {\n  const to = from ? new from.constructor() : {}\n  return 0 === path.length\n    ? value\n    : ((to[path[0]] =\n        1 < path.length\n          ? setDeep(path.slice(1), value, from[path[0]])\n          : value),\n      merge(from, to))\n}\n\nexport function get(path, from) {\n  for (let i = 0; i < path.length; i++) {\n    from = from[path[i]]\n  }\n  return from\n}\n\nexport function isFunction(data): data is Function {\n  return 'function' === typeof data\n}\n\nexport const noop = f => f\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/hydux/src/utils.ts"],"sourceRoot":""}